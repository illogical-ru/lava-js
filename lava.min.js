/* https://github.com/illogical-ru/lava-js */
var lava=function(z,n){function q(b){return b===n?"Undefined":null===b?"Null":Object.prototype.toString.call(b).replace(/^\[object\s(\w+)\]$/,"$1")}function D(b){b=q(b);return"Number"==b||"String"==b}function A(b){return"String"==q(b)&&!/\s/.test(b)}function E(b){var a=q(b);return!!b&&b!==z&&b.length===+b.length&&("Array"==a||"Arguments"==a||!!b.item||b instanceof N||(b==n?!1:Object.prototype.hasOwnProperty.call(b,"callee")))}function v(b){return!!b&&"Boolean"!=q(b)&&!D(b)}function g(b){return"Function"==q(b)}function p(b){return b&&b.getElementsByTagName&&b.nodeType||!1}function B(b){if(v(b))for(var a=0;++a<arguments.length;){var c=arguments[a],d;for(d in c)b[d]=c[d]}return b}function y(b){if(v(b))for(var a=0;++a<arguments.length;){var c=arguments[a];E(c)||(c=[c]);for(var d=0;d<c.length;d++)b.length=+b.length||0,b[b.length++]=c[d]}return b}function S(b,a,c){v(b)&&v(a)&&m(c,function(c,e){e in a&&(b[e]=a[e])});return b}function w(b,a){var c=m(b,function(b,c){if(c===a)return b});return c==n?-1:c}function f(b){var a=[];m(b,function(b,d){~w(a,d)||a.push(d)});return a}function m(b,a){var c,d=0,e=function(e){c=a.call(e,d,e,b);return c!=n};if(b!=n){if(E(b))for(;d<b.length&&!e(b[d]);d++);else if(v(b))for(d in b){if((b==n?0:Object.prototype.hasOwnProperty.call(b,d))&&e(b[d]))break}else e(b);return c}}function l(b,a){var c=[];m(b,function(d,e){e=a.call(this,d,e,b);e!=n&&y(c,e)});return c}function r(b,a,c){var d=[];m(b,function(e,k){!c^!a.call(this,e,k,b)&&d.push(k)});return d}function H(b){return D(b)?String(b).replace(/^\s+/gm,"").replace(/\s+$/gm,""):""}function T(b){return D(b)?String(b).replace(/([-$()*+.?\[\\\]^{|}])/g,"\\$1"):""}function Z(b,a){b=b||{};a=a||u;if(v(b)&&p(a)){var c={},d;m(["className","id","name","tagName"],function(a,d){c[d]=r(b[d],function(a,b){return A(b)});a&&1<c[d].length&&(c.error=d);c[d]=c[d].join(" ")});c.error||(c.id&&a.getElementById?d=[a.getElementById(c.id)]:c.name&&a.getElementsByName?d=a.getElementsByName(c.name):c.className&&a.getElementsByClassName?d=a.getElementsByClassName(c.className):a.getElementsByTagName&&(d=a.getElementsByTagName(c.tagName||"*")));return r(d,function(){return V(this,b)})}}function W(b){if(p(b))return r(b.children||b.childNodes,function(){return 1==p(this)})}function C(b,a,c){if(p(b)){for(var d=[];(b=a?b.nextSibling:b.previousSibling)&&(1!=p(b)||(d.push(b),!c)););return c?d.shift():a?d:d.reverse()}}function aa(b,a){if(!p(b)||!p(a))return!1;if(b.contains)return b.contains(a);if(b.compareDocumentPosition)return b===a||!!(b.compareDocumentPosition(a)&16);for(;a!==b;)if(a=a.parentNode,!a)return!1;return!0}function J(b){if(1==p(b))return f(H(b.className).match(/\S+/g))}function X(b,a){var c=J(b);c&&A(a)&&(~w(c,a)||c.push(a),b.className=c.join(" "))}function Y(b,a){var c=J(b);c&&c.length&&A(a)&&(c=r(c,function(){return this!=a}),b.className=c.join(" "))}function F(b){var a=[];b=r(b,function(b,d){if(aa(u,d))return!0;a.push(d)});b.sort(function(a,b){if(a.compareDocumentPosition)return(a.compareDocumentPosition(b)&2)-1;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;for(var e=[],k=[];a;)e.push(a),a=a.parentNode;for(;b;)k.push(b),b=b.parentNode;for(;e.length&&k.length;)if(a=e.pop(),b=k.pop(),a!==b){for(;a;)if(a=a.nextSibling,a===b)return-1;return 1}return e.length?1:-1});return y(b,a)}function V(b,a){if(!p(b)||!v(a))return!1;a.className!=n&&(a=B({},a),a.className=l(a.className,function(a,b){return A(b)?new RegExp("(?:^|\\s)"+T(b)+"(?:\\s|$)"):b}));return!m(a,function(a,d){E(d)||(d=[d]);return m(d,function(d,k){return D(k)?k!=b[a]||n:"RegExp"==q(k)?!k.test(b[a])||n:"Boolean"==q(k)?k!=!!b[a]||n:g(k)?!k.call(b,b[a])||n:k!==b[a]||n})})}function ba(b,a){var c=O(b),d=[];if(c)return m(c,function(b,c){y(d,K(a,c))}),2>c.length?d:F(f(d))}function P(b,a){a=a||u;var c=O(b),d=[];if(c)return m(c,function(b,c){c[0].context=" ";y(d,K([a],c))}),2>c.length?d:F(f(d))}function x(b,a,c){if(a==n||""==a)return b;if(g(a))return r(b,a,c);"String"==q(a)||E(a)||(a=[a]);if(E(a))return r(b,function(b,c){return~w(a,c)},c);var d=O(a),e=[];if(d)return m(d,function(a,c){c=c.shift();e[a]=K(b,[c])}),r(b,function(a,b){return m(d,function(a,c){if(~w(e[a],b))return K([b],c).length})},c)}function Q(){B(this,{first:function(b){return 0==b},last:function(b,a,c){return b==c.length-1},odd:function(b){return b&1},even:function(b){return!(b&1)},eq:function(b,a,c){return b==+a+(0>a?c.length:0)},lt:function(b,a){return b<a},gt:function(b,a){return b>a},has:function(b,a){if(p(this)&&a)return(a=P(a,this))&&a.length},not:function(b,a){return a?(a=x([this],a))&&!a.length:!0},parent:function(){return p(this)&&this.childNodes.length},empty:function(){return p(this)&&!this.childNodes.length},selected:function(){if(p(this)){if("OPTION"==this.tagName)return this.selected;if("INPUT"==this.tagName)return this.checked}}})}function K(b,a){m(a,function(a,d){var e=d.turn;if(">"==d.context)b=l(b,function(){return W(this)});else if("~"==d.context)b=l(b,function(){return C(this,1)});else if("+"==d.context)b=l(b,function(){return C(this,1,1)});else if(" "==d.context){if(e.length&&!g(e[0]))var e=y([],e),k=e.shift();b=l(b,function(a,b){if(b)return Z(k,b)})}d.context&&(b=F(f(b)));m(e,function(a,c){if(!b.length)return!1;b=g(c)?r(b,c):r(b,function(){return V(this,c)})})});return b}function N(b){this.length=0;g(b)?ca(b):this.merge(b)}function R(){var b=this;B(b,{get:function(){return y([],this)},size:function(){return this.length},fork:function(a){g(a)?a=l(this,a):"String"==q(a)&&(a=ba(a,this.get()));a=M(a);G(a).parent=this;return a},end:function(){return G(this,"parent")||this},sort:function(a){return this.fork(g(a)?this.get().sort(a):F(this))},unique:function(){return this.fork(f(this))},merge:function(a){g(a)?a=l(this,a):"String"==q(a)&&(a=P(a));return a==n?this:y(this,a)},each:function(a){g(a)&&m(this,a);return this},find:function(a){var b=l(this,function(){if(p(this))return P(a,this)});1<this.length&&(b=F(f(b)));return this.fork(b)},filter:function(a){return this.fork(x(this.get(),a))},not:function(a){return this.fork(x(this.get(),a,1))},eq:function(a){a=+a+(0>a?this.length:0);return this.fork(this[a])},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},lt:function(a){return this.fork(function(b){if(b<a)return this})},gt:function(a){return this.fork(function(b){if(b>a)return this})},parent:function(a){var b=l(this,function(){if(p(this))return this.parentNode});return this.fork(x(f(b),a))},children:function(a){var b=l(this,function(){return W(this)});return this.fork(x(f(b),a))},prev:function(a){var b=l(this,function(){return C(this,0,1)});return this.fork(x(f(b),a))},next:function(a){var b=l(this,function(){return C(this,1,1)});return this.fork(x(f(b),a))},prevAll:function(a){var b=l(this,function(){return C(this)});return this.fork(x(f(b),a))},nextAll:function(a){var b=l(this,function(){return C(this,1)});return this.fork(x(f(b),a))},hasClass:function(a){return!!m(this,function(){if(~w(J(this),a))return!0})},addClass:function(a){return this.each(function(){X(this,a)})},delClass:function(a){return this.each(function(){Y(this,a)})},toggleClass:function(a){return this.each(function(){~w(J(this),a)?Y(this,a):X(this,a)})},html:function(a){if(a==n){if(1==p(this[0]))return this[0].innerHTML}else return a=H(a),this.each(function(){1==p(this)&&(this.innerHTML=a)})},bind:function(a,b){return this.each(function(d,e){t.bind(e,a,b)})},unbind:function(a,b){return this.each(function(d,e){t.unbind(e,a,b)})},trigger:function(a){return this.each(function(b,d){t.trigger(d,a)})},one:function(a,b){if(!g(b))return this;var d=function(e){t.unbind(this,a,d);return b.call(this,e)};return this.bind(a,d)}});m("click mousedown mouseup dblclick mouseover mouseout mousemove keypress keydown keyup focus blur submit change".split(" "),function(a,c){b[c]=function(a){a==n?this.trigger(c):this.bind(c,a);return this}})}function M(b){return new N(b)}var u=z.document,G=function(){var b="lava_"+ +new Date;return function(a,c){if(v(a)){if(c!=n)return a[b]&&a[b]()[c];a[b]=a[b]||function(){var b={};return function(){a=null;return b}}();return a[b]()}}}(),t=function(){var b=function(a,b){a=a||z.event;var d=a.type,e=!0,k=!1,I=!1,U=function(){e=!1;a.preventDefault?a.preventDefault():a.returnValue=e},L=function(){k=!0;a.stopPropagation?a.stopPropagation():a.cancelBubble=k},h={type:d,target:a.target,timeStamp:a.timeStamp||+new Date,preventDefault:U,stopPropagation:L,stopImmediatePropagation:function(){I=!0;L()},isDefaultPrevented:function(){return e},isPropagationStopped:function(){return k},isImmediatePropagationStopped:function(){return I}};if(b)h.isTrigger=!0;else{h.originalEvent=a;S(h,a,"relatedTarget button which keyCode charCode altKey ctrlKey metaKey shiftKey clientX clientY pageX pageY screenX screenY offsetX offsetY".split(" "));h.target||(h.target=a.srcElement||u);!h.relatedTarget&&a.fromElement&&(h.relatedTarget=h.target===a.fromElement?a.toElement:a.fromElement);!h.which&&h.button&&(h.button&1?h.which=1:h.button&4?h.which=2:h.button&2&&(h.which=3));if(h.pageX==n&&h.clientX!=n){var g=h.target.ownerDocument||u,l=g.documentElement,g=g.body;h.pageX=h.clientX+(l&&l.scrollLeft||g&&g.scrollLeft||0)-(l&&l.clientLeft||g&&g.clientLeft||0);h.pageY=h.clientY+(l&&l.scrollTop||g&&g.scrollTop||0)-(l&&l.clientTop||g&&g.clientTop||0)}h.pageX!=n&&(h.offsetX=h.pageX-(h.target.offsetLeft||0),h.offsetY=h.pageY-(h.target.offsetTop||0))}var f=a.currentTarget;f||(L(),f=h.target,b=!0,k=!1);for(;f;)(l=G(f,"event"))&&m(l[d],function(){h.currentTarget=f;h.result=this.call(f,h);!1===h.result&&(U(),L());if(I)return I}),f=!k&&b&&p(f)&&f.parentNode};return{bind:function(a,c,d){if(!A(c)||!g(d))return!1;var e=G(a);if(!e)return!1;e=e.event=e.event||{};if(e[c])~w(e[c],d)||e[c].push(d);else if(e[c]=[d],a===z||p(a))a.addEventListener?a.addEventListener(c,b,!1):a.attachEvent&&a.attachEvent("on"+c,b);return!0},unbind:function(a,c,d){var e=G(a,"event");if(e)if(c&&d){var k=w(e[c],d);~k&&(e[c].splice(k,1),e[c].length||t.unbind(a,c))}else c?e[c]&&(delete e[c],a===z||p(a))&&(a.removeEventListener?a.removeEventListener(c,b,!1):a.detachEvent&&a.detachEvent("on"+c,b)):d?m(e,function(b){t.unbind(a,b,d)}):m(e,function(b){t.unbind(a,b)})},trigger:function(a,c){v(a)&&A(c)&&b({target:a,type:c},!0)}}}(),ca=function(){var b,a,c=function(){for(b=!0;a.length;)a.shift().call(u,M)};return function(d){g(d)&&(a?(a.push(d),b&&c()):(a=[d],t.bind(u,"DOMContentLoaded",c),t.bind(u,"readystatechange",function(){"complete"==u.readyState&&c()}),t.bind(u,"load",c),t.bind(z,"load",c)))}}();Q.prototype={};var O=function(){var b=new Q,a={re:"\\s*(?:\"((?:[^\\\\]|\\\\.)*?)\"|'((?:[^\\\\]|\\\\.)*?)'|(.*?))\\s*",un:function(a,b,c){return a?a.replace(/\\(?=[\\"])/g,""):b?b.replace(/\\(?=[\\'])/g,""):c||""}},c=[{re:"\\s*([,>+~]|\\s)\\s*",fn:function(a){if(","==a){if(!this.tail||!this.last().context&&!this.turn().length)return 1;this.unit()}else this.context(a)}},{re:"(\\*|[hH][1-6]|[a-zA-Z]+)",fn:function(a){if(this.turn().length)return 1;var b=this.attr("tagName");"*"!=a&&b.push(a.toUpperCase())}},{re:"(#|\\.)([\\w-]+)",fn:function(a,b){this.attr("#"==a?"id":"className").push(b)}},{re:"\\[\\s*(\\w+)\\s*(?:([!^$*~|]?=)"+a.re+")?\\]",fn:function(b,c,k,g,l){b=this.attr(b);var f=a.un(k,g,l);c?"="==c?b.push(f):"!="==c?b.push(function(a){return f!=a}):(f=T(f),"^="==c?f="^"+f:"$="==c?f+="$":"~="==c?f="(?:^|\\s)"+f+"(?:\\s|$)":"|="==c&&(f="^"+f+"(?:-|$)"),b.push(new RegExp(f))):b.push(!0)}},{re:":([\\w-]+)(?:\\("+a.re+"\\))?",fn:function(c,e,k,f){if(!g(b[c]))return 1;this.turn().push(function(g,l,h){return b[c].call(this,g,a.un(e,k,f),h)})}}];return function(a){if(a=H(a)){var b=B([],{unit:function(){this.push([]);this.context()},context:function(a){this[this.length-1].push({context:a,turn:[]})},last:function(){var a=this[this.length-1];return a[a.length-1]},turn:function(){return this.last().turn},attr:function(a){var b=this.turn(),c=b[b.length-1];if(!c||g(c))c={},b.push(c);c[a]=c[a]||[];return c[a]}});for(b.unit();m(c,function(c,f){var g=a.match("^"+f.re);if(g)return b.tail=a.substr(g.shift().length),f.fn.apply(b,g)?0:a=b.tail}););if(!a)return b;throw Error("Syntax error, unrecognized expression: "+a);}}}();R.prototype={};N.prototype=new R;B(M,{version:.1,fn:R.prototype,filter:Q.prototype,each:function(b,a){if(g(a))return m(b,a)},map:function(b,a){return g(a)?l(b,a):[]},grep:function(b,a,c){return g(a)?r(b,a,c):[]},type:q,extend:B,merge:y,copy:S,exists:w,unique:f,trim:H,escapeHTML:function(b){return D(b)?String(b).replace(/&/g,"&amp;").replace(/'/g,"&#39;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}});return M}(window);
